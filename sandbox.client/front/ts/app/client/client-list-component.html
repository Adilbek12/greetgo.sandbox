<client-details-component #client_details_component
                          (onModalCloseOutput)="onModalClose($event)"></client-details-component>

<div class="row">
  <form class="form-group form-inline col-xs-3"
        [attr.disabled]="isModalFormActive"
        #filter_form="ngForm"
        (ngSubmit)="onFilterButtonClick(filter_form.value)">
    <div class="input-group input-group-lg filter-input-group">
      <label for="input-filter" class="sr-only">
        Фильтрация ФИО
      </label>
      <input id="input-filter"
             type="text"
             name="filter"
             class="form-control client-record-keep-selection"
             (ngModelChange)="onFilterTextChange($event)"
             ngModel>
      <span class="input-group-btn">
            <button class="btn"
                    [ngClass]="{'btn-default': filterSuccessState == null,
                      'btn-success': filterSuccessState == true,
                      'btn-danger': filterSuccessState == false}"
                    type="submit">
              <span class="glyphicon glyphicon-filter"></span>
            </button>
        </span>
    </div>
  </form>
</div>
<div class="row">
  <div class="col-lg-11">
    <table class="table table-bordered">
      <thead>
      <tr>
        <th class="center-all col-xs-3">
          <span class="center-block">ФИО</span>
        </th>
        <th class="col-xs-1 center-all">
          <span class="center-block">Характер</span>
        </th>
        <th class="center-all col-xs-1">
          <span class="center-block">Возраст</span>
          <div class="btn-group btn-group-sm">
            <button class="btn btn-default glyphicon glyphicon-arrow-up"
                    [ngClass]="{'btn-success':isSortingButtonActive('AGE', true)}"
                    (click)="onSortingButtonClick('AGE', true)">
            </button>
            <button class="btn btn-default glyphicon glyphicon-list"
                    [ngClass]="{'btn-success':isSortingButtonActive('NONE', false)}"
                    (click)="onSortingButtonClick('NONE', false)">
            </button>
            <button class="btn btn-default glyphicon glyphicon-arrow-down"
                    [ngClass]="{'btn-success':isSortingButtonActive('AGE', false)}"
                    (click)="onSortingButtonClick('AGE', false)">
            </button>
          </div>
        </th>
        <th class="center-all col-xs-2">
          <span class="center-block">Общий остаток счетов</span>
          <div class="btn-group btn-group-sm">
            <button class="btn btn-default glyphicon glyphicon-arrow-up"
                    [ngClass]="{'btn-success':isSortingButtonActive('TOTALACCOUNTBALANCE', true)}"
                    (click)="onSortingButtonClick('TOTALACCOUNTBALANCE', true)">
            </button>
            <button id="sort-total-none"
                    class="btn btn-default glyphicon glyphicon-list"
                    [ngClass]="{'btn-success':isSortingButtonActive('NONE', false)}"
                    (click)="onSortingButtonClick('NONE', false)">
            </button>
            <button class="btn btn-default glyphicon glyphicon-arrow-down"
                    [ngClass]="{'btn-success':isSortingButtonActive('TOTALACCOUNTBALANCE', false)}"
                    (click)="onSortingButtonClick('TOTALACCOUNTBALANCE', false)">
            </button>
          </div>
        </th>
        <th class="center-all col-xs-2">
          <span class="center-block">Максимальный остаток</span>
          <div class="btn-group btn-group-sm">
            <button class="btn btn-default glyphicon glyphicon-arrow-up"
                    [ngClass]="{'btn-success':isSortingButtonActive('MAXACCOUNTBALANCE', true)}"
                    (click)="onSortingButtonClick('MAXACCOUNTBALANCE', true)">
            </button>
            <button class="btn btn-default glyphicon glyphicon-list"
                    [ngClass]="{'btn-success':isSortingButtonActive('NONE', true)}"
                    (click)="onSortingButtonClick('NONE', true)">
            </button>
            <button class="btn btn-default glyphicon glyphicon-arrow-down"
                    [ngClass]="{'btn-success':isSortingButtonActive('MAXACCOUNTBALANCE', false)}"
                    (click)="onSortingButtonClick('MAXACCOUNTBALANCE', false)">
            </button>
          </div>
        </th>
        <th class="center-all col-xs-2">
          <span class="center-block">Минимальный остаток</span>
          <div class="btn-group btn-group-sm">
            <button class="btn btn-default glyphicon glyphicon-arrow-up"
                    [ngClass]="{'btn-success':isSortingButtonActive('MINACCOUNTBALANCE', true)}"
                    (click)="onSortingButtonClick('MINACCOUNTBALANCE', true)">
            </button>
            <button class="btn btn-default glyphicon glyphicon-list"
                    [ngClass]="{'btn-success':isSortingButtonActive('NONE', false)}"
                    (click)="onSortingButtonClick('NONE', false)">
            </button>
            <button class="btn btn-default glyphicon glyphicon-arrow-down"
                    [ngClass]="{'btn-success':isSortingButtonActive('MINACCOUNTBALANCE', false)}"
                    (click)="onSortingButtonClick('MINACCOUNTBALANCE', false)">
            </button>
          </div>
        </th>
      </tr>
      </thead>
      <tbody *ngFor="let record of records">
      <tr (click)="onClientRecordClick(record.id);"
          [ngClass]="{'success': record.id == selectedRecordId}">
        <td class="client-record-keep-selection">{{record.fullName}}</td>
        <td class="client-record-keep-selection">{{record.charmName}}</td>
        <td class="client-record-keep-selection">{{record.age}}</td>
        <td class="client-record-keep-selection">{{record.totalAccountBalance}}</td>
        <td class="client-record-keep-selection">{{record.maxAccountBalance}}</td>
        <td class="client-record-keep-selection">{{record.minAccountBalance}}</td>
      </tr>
      </tbody>
    </table>
  </div>
  <div class="col-sm-1">
    <div class="text-center">
      <div class="btn-group-vertical btn-group-lg">
        <button class="btn btn-success btn-operation"
                (click)="onClientRecordEditButtonClick(client_details_component, false);">
          +
        </button>
        <button class="btn btn-operation client-record-keep-selection"
                [ngClass]="{'btn-primary': selectedRecordId != null}"
                (click)="onClientRecordEditButtonClick(client_details_component, true)"
                [disabled]="selectedRecordId == null">
          ...
        </button>
        <button class="btn btn-operation"
                [ngClass]="{'btn-danger': selectedRecordId != null}"
                (click)="onClientRecordRemoveButtonClick()"
                [disabled]="selectedRecordId == null">
          -
        </button>
      </div>
    </div>
  </div>
</div>
<div class="row">
  <div class="btn-group form-inline col-xs-3">
    <select class="btn form-control"
            id="content-type"
            name="content-type"
            [ngClass]="{'btn-danger': downloadContentType == fileContentTypeEnum.PDF,
                    'btn-success': downloadContentType == fileContentTypeEnum.XLSX}"
            [(ngModel)]="downloadContentType">
      <option [value]="fileContentTypeEnum.PDF"
              [selected]="downloadContentType == fileContentTypeEnum.PDF">
        PDF
      </option>
      <option [value]="fileContentTypeEnum.XLSX"
              [selected]="downloadContentType == fileContentTypeEnum.XLSX">
        XLSX
      </option>
    </select>
    <button class="btn btn-default"
            (click)="onClientRecordListDownloadButtonClick()"
            [disabled]="records.length == 0">
      Загрузить список
    </button>
  </div>
  <div class="col-xs-8 col-xs-pull-1">
    <div class="text-center">
      <div class="btn-group btn-group-lg">
        <button *ngFor="let pageNum of pageNums"
                class="btn btn-default"
                [ngClass]="{'active': pageNum == curPageNum + 1}"
                (click)="onPageNumberButtonClick(pageNum-1)">
          {{pageNum}}
        </button>
      </div>
    </div>
  </div>
</div>

